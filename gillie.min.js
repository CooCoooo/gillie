/*
* Gillie 0.1.3 | http://pablovallejo.github.io/gillie
*/
(function(h,k){var p=!1,v=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,g=function(){},l=function(a){h.each([].slice.call(arguments,1),function(b,c){if(c)for(var d in c)a[d]=c[d]});return a},m=g.Events={on:function(a,b,c){if(!q(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},trigger:function(a){if(!this._events)return this;var b=[].slice.call(arguments,1);if(!q(this,"trigger",a,b))return this;
var c=this._events[a];if(c){var d,e=-1,f=c.length,g=b[0],h=b[1],k=b[2];switch(b.length){case 0:for(;++e<f;)(d=c[e]).callback.call(d.ctx);break;case 1:for(;++e<f;)(d=c[e]).callback.call(d.ctx,g);break;case 2:for(;++e<f;)(d=c[e]).callback.call(d.ctx,g,h);break;case 3:for(;++e<f;)(d=c[e]).callback.call(d.ctx,g,h,k);break;default:for(;++e<f;)(d=c[e]).callback.apply(d.ctx,b)}}return this}},r=/\s+/,q=function(a,b,c,d){if(c){if("object"===typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(r.test(c)){c=
c.split(r);e=0;for(var f=c.length;e<f;e++)a[b].apply(a,[c[e]].concat(d));return!1}return!0}};h.each({on:"listenTo"},function(a,b){m[b]=function(c,b,e){var f=this._listeners||(this._listeners={}),g=c._listenerId||(c._listenerId=s("l"));f[g]=c;"object"===typeof b&&(e=this);c[a](b,e,this);return this}});var n=g.Handler=function(a){this.initialize&&this.initialize.apply(this,arguments);this.delegateEvents()},w=/^(\S+)\s*(.*)$/;l(n.prototype,m,{bind:function(a,b){return function(){return a.apply(b,arguments)}},
delegateEvents:function(a){if(!a&&!(a=this.events))return this;for(var b in a){var c=a[b];if(c=this[a[b]]){var d=b.match(w),e=d[1],d=d[2],f=this.el||document,c=this.bind(c,this);if(""===d)h(f).on(e,c);else h(f).on(e,d,c)}}return this}});n=g.Controller=function(a){this.initialize&&this.initialize()};l(n.prototype,m);var t=g.Model=function(a){var b=a||{};this.cid=s("c");this.attributes={};if(a=this.defaults)b=h.extend({},a,b);this.attributes=b;this.initialize&&this.initialize()},x=/(\(\?)?:\w+/g;l(t.prototype,
m,{set:function(a,b,c){var d,e;if(null==a)return this;"object"===typeof a?(e=a,c=b):(e={})[a]=b;c||(c={});c=c.unset;a=this.attributes;for(d in e)b=e[d],c?delete a[d]:a[d]=b;return this},get:function(a){return this.attributes[a]},unset:function(a,b){return this.set(a,void 0,l({},b,{unset:!0}))},toJSON:function(){return h.extend({},this.attributes)},buildRequestUrl:function(a){var b,c,d=this;a=a.replace(x,function(a,f){b=a.replace(":","");c=d.get(b);return f?a:c||a});return this.url?this.url+a:k.location.href+
"/"+a},sync:function(){return g.sync.apply(this,arguments)}});var u={};h.each([["Get","read"],["Post","create"],["Put","update"],["Delete","delete"],["Patch","patch"]],function(a,b){u[b[0]]=function(a,d,e){var f=this,g=e.success;e.success=function(a){g&&g(f,a,e);f.trigger(d,f,a,e)};e.url=this.buildRequestUrl(a);return this.sync(b[1],this,e)}});l(t.prototype,u);g.View=n;g.sync=function(a,b,c){var d={type:y[a],dataType:"json"};c.url||(d.url=b.url);null!=c.data||!b||"create"!==a&&"update"!==a&&"patch"!==
a||(d.contentType="application/json",d.data=JSON.stringify(c.attrs||b.toJSON()));"GET"!==d.type&&(d.processData=!1);"PATCH"===d.type&&z&&(d.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});a=c.xhr=g.ajax(h.extend(d,c));b.trigger("request",b,a,c);return a};var z="undefined"!==typeof k&&!!k.ActiveXObject&&!(k.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),y={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};g.ajax=function(){return h.ajax.apply(h,arguments)};
var A=0,s=function(a){var b=++A+"";return a?a+b:b};g.Handler.extend=g.Model.extend=g.Controller.extend=g.View.extend=function(a){function b(){p||d.apply(this,arguments)}var c=this.prototype,d=this;p=!0;var e=new this;p=!1;for(var f in a)e[f]="function"==typeof a[f]&&"function"==typeof c[f]&&v.test(a[f])?function(a,b){return function(){var d=this._super;this._super=c[a];var e=b.apply(this,arguments);this._super=d;return e}}(f,a[f]):a[f];b.prototype=e;b.prototype.constructor=b;b.extend=arguments.callee;
return b};k.Gillie=g})(jQuery,this);